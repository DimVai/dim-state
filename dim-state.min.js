"use strict";var State={stateVariables:new Set,stateDependencies:[[]],defaultStateValue:null,areStateVariablesPublic:!1,localStorageVariables:new Set,sessionStorageVariables:new Set,hasValue:function(stateVariable){return null!=this[stateVariable]},create:function(variable,value=this.defaultStateValue){if(!this.freezedMethods.includes(variable)){if(this["_"+variable]=value,this.stateVariables.add(variable),Object.defineProperty(State,variable,{set:function(value){if(this["_"+variable]=value,this.areStateVariablesPublic)try{window["_"+variable]=value}catch(e){}this.sessionStorageVariables.has(variable)&&(sessionStorage[variable]=value),this.localStorageVariables.has(variable)&&(localStorage[variable]=value),this.updateDOMwithState(variable),this.updateDependencies(variable)},get:function(){return this["_"+variable]}}),this.areStateVariablesPublic)try{window["_"+variable]=value;let that=this;Object.defineProperty(window,variable,{set:function(value){that["_"+variable]=value,window["_"+variable]=value,that.sessionStorageVariables.has(variable)&&(sessionStorage[variable]=value),that.localStorageVariables.has(variable)&&(localStorage[variable]=value),that.updateDOMwithState(variable),that.updateDependencies(variable)},get:function(){return window["_"+variable]}})}catch(e){console.error(`Cannot define global State variable with the name "${variable}"`)}return this.updateDOMwithState(variable),value}console.error(`You can't use "${variable}" as a name for a State Variable`)},synchronize:function(variable,storageType){return"localStorage"==storageType?(this.localStorageVariables.add(variable),void 0===localStorage[variable]?localStorage[variable]=this[variable]||"":this[variable]=localStorage[variable]):"sessionStorage"==storageType&&(this.sessionStorageVariables.add(variable),void 0===sessionStorage[variable]?sessionStorage[variable]=this[variable]||"":this[variable]=sessionStorage[variable]),State[variable]},updateDOMwithState:function(variable){return this.hasValue(variable)&&(document.querySelectorAll("[data-state-variable="+variable+"]").forEach(element=>element.innerHTML=State[variable]),document.querySelectorAll("[data-state-value="+variable+"]").forEach((function(element){try{element.value=State[variable]}catch{}})),document.querySelectorAll("[data-state-attribute-value="+variable+"]").forEach((function(element){try{element.setAttribute(element.getAttribute("data-state-attribute-name"),State[variable])}catch{}}))),State[variable]},createDependency:function(variable,dependenciesArray,AssignmentsAsString){return dependenciesArray.forEach(dependency=>{this.stateDependencies.push([dependency,variable,AssignmentsAsString])}),State[variable]},updateDependencies:function(variable){return this.hasValue(variable)&&this.stateDependencies.forEach((dependency,r)=>{dependency[0]==variable&&eval(dependency[2])}),State[variable]},freezedMethods:["stateVariables","stateDependencies","localStorageVariables","sessionStorageVariables","hasValue","create","synchronize","updateDOMwithState","createDependency","updateDependencies","freezedMethods"]};("undefined"==typeof StatePublicVariables||StatePublicVariables)&&(State.areStateVariablesPublic=!0),function setHTMLclasses(){let DOMvariables=/{{{(\w+)}}}/gi,unwantedChars=/[\{\}]/g,uniqueArray=arr=>[...new Set(arr)],textStateVariables=(document.body.innerHTML.match(DOMvariables)||[]).map(e=>e.replace(unwantedChars,"")),dataStateVariables=[],stateVariables;document.querySelectorAll("[data-state-value]").forEach((function(element){dataStateVariables.push(element.getAttribute("data-state-value"))})),document.querySelectorAll("[data-state-attribute-value]").forEach((function(element){dataStateVariables.push(element.getAttribute("data-state-attribute-value"))})),uniqueArray([...textStateVariables,...dataStateVariables]).forEach(variable=>{State.create(variable,null)}),document.body.innerHTML=document.body.innerHTML.replace(DOMvariables,'<span data-state-variable="$1"></span>')}(),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-state-value]").forEach((function(element){element.getAttribute("value")&&!State.hasValue(element.getAttribute("data-state-value"))&&(State[element.getAttribute("data-state-value")]=element.getAttribute("value"));let updateStateValue=()=>{try{State[element.getAttribute("data-state-value")]=element.value}catch{}};element.addEventListener("input",(function(){updateStateValue()})),element.addEventListener("change",(function(){updateStateValue()}))}))});